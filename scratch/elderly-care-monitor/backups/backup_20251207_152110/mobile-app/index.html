<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="theme-color" content="#6366f1">
    <title>ElderCare - 보호자 앱</title>
    <meta name="description" content="노인 케어 모니터링 - 보호자용 모바일 앱">

    <!-- PWA Manifest -->
    <link rel="manifest" href="manifest.json">

    <!-- Apple Touch Icon -->
    <link rel="apple-touch-icon" href="icon-192.png">

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap"
        rel="stylesheet">

    <link rel="stylesheet" href="mobile-styles.css">
</head>

<body>
    <!-- Splash Screen -->
    <div id="splashScreen" class="splash-screen">
        <div class="splash-content">
            <div class="splash-logo">
                <svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                    <circle cx="50" cy="50" r="45" class="pulse-ring" />
                    <circle cx="50" cy="50" r="30" class="pulse-ring" style="animation-delay: 0.3s" />
                    <circle cx="50" cy="50" r="15" class="status-core" />
                </svg>
            </div>
            <h1>ElderCare</h1>
            <p>보호자 앱</p>
            <div class="loading-spinner"></div>
        </div>
    </div>

    <!-- Main App -->
    <div id="app" class="app-container" style="display: none;">
        <!-- Header -->
        <header class="mobile-header">
            <div class="header-content">
                <button class="menu-btn" onclick="toggleMenu()">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                        <path d="M3 12h18M3 6h18M3 18h18" stroke-width="2" stroke-linecap="round" />
                    </svg>
                </button>
                <h1 class="header-title">어머니 모니터링</h1>
                <button class="notification-btn" onclick="showNotifications()">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                        <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9M13.73 21a2 2 0 0 1-3.46 0" stroke-width="2"
                            stroke-linecap="round" />
                    </svg>
                    <span class="notification-badge" id="notificationBadge">0</span>
                </button>
            </div>
        </header>

        <!-- Side Menu -->
        <div id="sideMenu" class="side-menu">
            <div class="menu-header">
                <div class="user-info">
                    <div class="user-avatar">👤</div>
                    <div class="user-details">
                        <h3>김민수</h3>
                        <p>보호자</p>
                    </div>
                </div>
                <button class="close-menu-btn" onclick="toggleMenu()">×</button>
            </div>
            <nav class="menu-nav">
                <a href="#" class="menu-item active" onclick="showTab('dashboard')">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                        <rect x="3" y="3" width="7" height="7" stroke-width="2" />
                        <rect x="14" y="3" width="7" height="7" stroke-width="2" />
                        <rect x="14" y="14" width="7" height="7" stroke-width="2" />
                        <rect x="3" y="14" width="7" height="7" stroke-width="2" />
                    </svg>
                    <span>대시보드</span>
                </a>
                <a href="#" class="menu-item" onclick="showTab('history')">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                        <circle cx="12" cy="12" r="10" stroke-width="2" />
                        <path d="M12 6v6l4 2" stroke-width="2" stroke-linecap="round" />
                    </svg>
                    <span>이력</span>
                </a>
                <a href="#" class="menu-item" onclick="showTab('settings')">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                        <circle cx="12" cy="12" r="3" stroke-width="2" />
                        <path d="M12 1v6m0 6v6M23 12h-6m-6 0H1" stroke-width="2" />
                    </svg>
                    <span>설정</span>
                </a>
                <a href="#" class="menu-item" onclick="showTab('contacts')">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                        <path
                            d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2M9 11a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM23 21v-2a4 4 0 0 0-3-3.87M16 3.13a4 4 0 0 1 0 7.75"
                            stroke-width="2" stroke-linecap="round" />
                    </svg>
                    <span>연락처</span>
                </a>
            </nav>
            <div class="menu-footer">
                <button class="emergency-btn" onclick="callEmergency()">
                    🚨 긴급 연락
                </button>
            </div>
        </div>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Dashboard Tab -->
            <div id="dashboardTab" class="tab-content active">
                <!-- Status Card -->
                <div class="status-card-mobile">
                    <div class="status-header">
                        <h2>현재 상태</h2>
                        <div class="connection-status">
                            <span class="status-dot online"></span>
                            <span>연결됨</span>
                        </div>
                    </div>
                    <div class="status-visual-mobile">
                        <div class="status-icon-mobile" id="statusIconMobile">
                            <svg viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg">
                                <circle cx="100" cy="100" r="80" class="pulse-ring" />
                                <circle cx="100" cy="100" r="60" class="pulse-ring" style="animation-delay: 0.5s" />
                                <circle cx="100" cy="100" r="40" class="pulse-ring" style="animation-delay: 1s" />
                                <circle cx="100" cy="100" r="20" class="status-core" />
                            </svg>
                        </div>
                        <div class="status-info-mobile">
                            <div class="status-badge-mobile" id="statusBadgeMobile">
                                <span class="badge-dot"></span>
                                <span id="statusTextMobile">정상</span>
                            </div>
                            <div class="confidence-score-mobile">
                                <span class="score-label">신뢰도</span>
                                <span class="score-value" id="confidenceScoreMobile">95%</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Quick Stats -->
                <div class="quick-stats">
                    <div class="stat-card">
                        <div class="stat-icon">💓</div>
                        <div class="stat-info">
                            <div class="stat-label">심박수</div>
                            <div class="stat-value" id="heartRateMobile">72</div>
                            <div class="stat-unit">BPM</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">🫁</div>
                        <div class="stat-info">
                            <div class="stat-label">호흡수</div>
                            <div class="stat-value" id="breathRateMobile">16</div>
                            <div class="stat-unit">회/분</div>
                        </div>
                    </div>
                </div>

                <!-- Activity Card -->
                <div class="activity-card-mobile">
                    <h3>활동 정보</h3>
                    <div class="activity-items">
                        <div class="activity-item-mobile">
                            <span class="activity-label">마지막 움직임</span>
                            <span class="activity-value" id="lastMovementMobile">5초 전</span>
                        </div>
                        <div class="activity-item-mobile">
                            <span class="activity-label">무활동 시간</span>
                            <span class="activity-value" id="inactiveTimeMobile">0분</span>
                        </div>
                        <div class="activity-item-mobile">
                            <span class="activity-label">마지막 업데이트</span>
                            <span class="activity-value" id="lastUpdateMobile">방금 전</span>
                        </div>
                    </div>
                </div>

                <!-- Recent Events -->
                <div class="recent-events-mobile">
                    <div class="section-header-mobile">
                        <h3>최근 이벤트</h3>
                        <button class="view-all-btn" onclick="showTab('history')">전체보기 →</button>
                    </div>
                    <div id="recentEventsList" class="events-list-mobile">
                        <!-- Events will be added dynamically -->
                    </div>
                </div>
            </div>

            <!-- History Tab -->
            <div id="historyTab" class="tab-content">
                <div class="history-header-mobile">
                    <h2>감지 이력</h2>
                    <div class="filter-chips">
                        <button class="filter-chip active" data-filter="all">전체</button>
                        <button class="filter-chip" data-filter="normal">정상</button>
                        <button class="filter-chip" data-filter="fall">낙상</button>
                        <button class="filter-chip" data-filter="apnea">무호흡</button>
                    </div>
                </div>
                <div id="historyListMobile" class="history-list-mobile">
                    <!-- History items will be added dynamically -->
                </div>
            </div>

            <!-- Settings Tab -->
            <div id="settingsTab" class="tab-content">
                <div class="settings-mobile">
                    <h2>설정</h2>

                    <div class="settings-section">
                        <h3>알림 설정</h3>
                        <div class="setting-item-mobile">
                            <div class="setting-info">
                                <div class="setting-label">낙상 감지 알림</div>
                                <div class="setting-description">낙상 감지 시 즉시 알림</div>
                            </div>
                            <label class="toggle-switch">
                                <input type="checkbox" id="fallAlertMobile" checked>
                                <span class="toggle-slider-mobile"></span>
                            </label>
                        </div>
                        <div class="setting-item-mobile">
                            <div class="setting-info">
                                <div class="setting-label">무호흡 감지 알림</div>
                                <div class="setting-description">무호흡 감지 시 즉시 알림</div>
                            </div>
                            <label class="toggle-switch">
                                <input type="checkbox" id="apneaAlertMobile" checked>
                                <span class="toggle-slider-mobile"></span>
                            </label>
                        </div>
                        <div class="setting-item-mobile">
                            <div class="setting-info">
                                <div class="setting-label">푸시 알림</div>
                                <div class="setting-description">앱 알림 수신</div>
                            </div>
                            <label class="toggle-switch">
                                <input type="checkbox" id="pushNotificationMobile" checked>
                                <span class="toggle-slider-mobile"></span>
                            </label>
                        </div>
                        <div class="setting-item-mobile">
                            <div class="setting-info">
                                <div class="setting-label">소리 알림</div>
                                <div class="setting-description">알림 소리 재생</div>
                            </div>
                            <label class="toggle-switch">
                                <input type="checkbox" id="soundAlertMobile" checked>
                                <span class="toggle-slider-mobile"></span>
                            </label>
                        </div>
                    </div>

                    <div class="settings-section">
                        <h3>감지 임계값</h3>
                        <div class="setting-item-mobile">
                            <div class="setting-info">
                                <div class="setting-label">무호흡 감지 시간</div>
                                <div class="setting-value" id="apneaThresholdValueMobile">5분</div>
                            </div>
                            <input type="range" id="apneaThresholdMobile" min="3" max="10" value="5" step="1"
                                class="slider-mobile">
                        </div>
                        <div class="setting-item-mobile">
                            <div class="setting-info">
                                <div class="setting-label">감지 민감도</div>
                                <div class="setting-value" id="sensitivityValueMobile">7</div>
                            </div>
                            <input type="range" id="sensitivityMobile" min="1" max="10" value="7" step="1"
                                class="slider-mobile">
                        </div>
                    </div>

                    <div class="settings-section">
                        <h3>앱 정보</h3>
                        <div class="info-item">
                            <span>버전</span>
                            <span>1.0.0</span>
                        </div>
                        <div class="info-item">
                            <span>마지막 업데이트</span>
                            <span>2024-12-07</span>
                        </div>
                    </div>

                    <button class="btn-primary-mobile" onclick="saveSettingsMobile()">설정 저장</button>
                </div>
            </div>

            <!-- Contacts Tab -->
            <div id="contactsTab" class="tab-content">
                <div class="contacts-mobile">
                    <h2>긴급 연락처</h2>

                    <div class="contact-card">
                        <div class="contact-icon">👨‍⚕️</div>
                        <div class="contact-info">
                            <h4>주치의</h4>
                            <p>김의사 선생님</p>
                            <p class="contact-phone">02-1234-5678</p>
                        </div>
                        <button class="call-btn" onclick="makeCall('02-1234-5678')">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                <path
                                    d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"
                                    stroke-width="2" />
                            </svg>
                        </button>
                    </div>

                    <div class="contact-card">
                        <div class="contact-icon">🚑</div>
                        <div class="contact-info">
                            <h4>응급실</h4>
                            <p>서울대병원 응급의료센터</p>
                            <p class="contact-phone">119</p>
                        </div>
                        <button class="call-btn emergency" onclick="makeCall('119')">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                <path
                                    d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"
                                    stroke-width="2" />
                            </svg>
                        </button>
                    </div>

                    <div class="contact-card">
                        <div class="contact-icon">👨‍👩‍👧</div>
                        <div class="contact-info">
                            <h4>부 보호자</h4>
                            <p>김영희 (딸)</p>
                            <p class="contact-phone">010-9876-5432</p>
                        </div>
                        <button class="call-btn" onclick="makeCall('010-9876-5432')">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                <path
                                    d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"
                                    stroke-width="2" />
                            </svg>
                        </button>
                    </div>

                    <button class="btn-secondary-mobile" onclick="addContact()">+ 연락처 추가</button>
                </div>
            </div>
        </main>

        <!-- Bottom Navigation -->
        <nav class="bottom-nav">
            <button class="nav-item active" onclick="showTab('dashboard')">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                    <rect x="3" y="3" width="7" height="7" stroke-width="2" />
                    <rect x="14" y="3" width="7" height="7" stroke-width="2" />
                    <rect x="14" y="14" width="7" height="7" stroke-width="2" />
                    <rect x="3" y="14" width="7" height="7" stroke-width="2" />
                </svg>
                <span>홈</span>
            </button>
            <button class="nav-item" onclick="showTab('history')">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                    <circle cx="12" cy="12" r="10" stroke-width="2" />
                    <path d="M12 6v6l4 2" stroke-width="2" stroke-linecap="round" />
                </svg>
                <span>이력</span>
            </button>
            <button class="nav-item" onclick="showTab('settings')">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                    <circle cx="12" cy="12" r="3" stroke-width="2" />
                    <path d="M12 1v6m0 6v6M23 12h-6m-6 0H1" stroke-width="2" />
                </svg>
                <span>설정</span>
            </button>
            <button class="nav-item" onclick="showTab('contacts')">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                    <path
                        d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2M9 11a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM23 21v-2a4 4 0 0 0-3-3.87M16 3.13a4 4 0 0 1 0 7.75"
                        stroke-width="2" stroke-linecap="round" />
                </svg>
                <span>연락처</span>
            </button>
        </nav>
    </div>

    <!-- Alert Modal -->
    <div id="alertModal" class="modal">
        <div class="modal-content">
            <div class="modal-icon" id="modalIcon">⚠️</div>
            <h3 id="modalTitle">이상 징후 감지</h3>
            <p id="modalMessage">낙상이 감지되었습니다. 즉시 확인이 필요합니다.</p>
            <div class="modal-actions">
                <button class="btn-secondary-mobile" onclick="closeModal()">확인</button>
                <button class="btn-primary-mobile" onclick="callEmergency()">긴급 연락</button>
            </div>
        </div>
    </div>

    <!-- Toast Notification -->
    <div id="toast" class="toast">
        <span id="toastMessage"></span>
    </div>

    <script src="mobile-app.js"></script>
</body>

</html>